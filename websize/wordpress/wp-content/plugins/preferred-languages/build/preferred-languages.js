(()=>{"use strict";var e={n:a=>{var t=a&&a.__esModule?()=>a.default:()=>a;return e.d(t,{a:t}),t},d:(a,t)=>{for(var l in t)e.o(t,l)&&!e.o(a,l)&&Object.defineProperty(a,l,{enumerable:!0,get:t[l]})},o:(e,a)=>Object.prototype.hasOwnProperty.call(e,a)};const a=window.wp.element,t=window.wp.domReady;var l=e.n(t);const r=window.wp.data,n=window.wp.i18n,o=window.wp.components,s=window.wp.keyboardShortcuts,c=window.wp.a11y;function g(e,a,t){const l=e.splice(a,1)[0];return e.splice(t,0,l),e}function i(e){let{languages:t,selectedLanguage:l,onMoveUp:r,onMoveDown:c,onRemove:g}=e;const i=!l||t[0]?.locale===l?.locale,u=!l||t[t.length-1]?.locale===l?.locale,d=!l;return(0,s.useShortcut)("preferred-languages/move-up",(e=>{e.preventDefault(),i||r()})),(0,s.useShortcut)("preferred-languages/move-down",(e=>{e.preventDefault(),u||c()})),(0,s.useShortcut)("preferred-languages/remove",(e=>{e.preventDefault(),d||g()})),(0,a.createElement)("div",{className:"active-locales-controls"},(0,a.createElement)("ul",null,(0,a.createElement)("li",null,(0,a.createElement)(o.Button,{isSecondary:!0,showTooltip:!0,"aria-keyshortcuts":"ArrowUp","aria-label":(0,n.sprintf)(/* translators: accessibility text */
(0,n.__)("Move up (%s)","preferred-languages"),/* translators: keyboard shortcut (Arrow Up) */
(0,n.__)("Up","preferred-languages")),label:/* translators: keyboard shortcut (Arrow Up) */
(0,n.__)("Up","preferred-languages"),disabled:i,onClick:r},(0,n.__)("Move Up","preferred-languages"))),(0,a.createElement)("li",null,(0,a.createElement)(o.Button,{isSecondary:!0,showTooltip:!0,"aria-keyshortcuts":"ArrowDown","aria-label":(0,n.sprintf)(/* translators: accessibility text */
(0,n.__)("Move down (%s)","preferred-languages"),/* translators: keyboard shortcut (Arrow Down) */
(0,n.__)("Down","preferred-languages")),label:/* translators: keyboard shortcut (Arrow Down) */
(0,n.__)("Down","preferred-languages"),disabled:u,onClick:c},(0,n.__)("Move Down","preferred-languages"))),(0,a.createElement)("li",null,(0,a.createElement)(o.Button,{isSecondary:!0,showTooltip:!0,"aria-keyshortcuts":"Delete","aria-label":(0,n.sprintf)(/* translators: accessibility text */
(0,n.__)("Remove from list (%s)","preferred-languages"),/* translators: keyboard shortcut (Delete / Backspace) */
(0,n.__)("Delete","preferred-languages")),label:/* translators: keyboard shortcut (Delete / Backspace) */
(0,n.__)("Delete","preferred-languages"),disabled:d,onClick:g},(0,n.__)("Remove","preferred-languages")))))}const u=function(e){let{languages:t,setLanguages:l,showOptionSiteDefault:r=!1,selectedLanguage:o,setSelectedLanguage:u}=e;const d=(0,a.useRef)(),p=0===t.length;(0,a.useLayoutEffect)((()=>{const e=d.current.querySelector('[aria-selected="true"]');e&&e.scrollIntoView({behavior:"smooth",block:"nearest"})}),[o,t]),(0,s.useShortcut)("preferred-languages/select-first",(e=>{e.preventDefault(),p||u(t.at(0))})),(0,s.useShortcut)("preferred-languages/select-last",(e=>{e.preventDefault(),p||u(t.at(-1))}));const f=p?"":o.locale,m=p?"active-locales-list empty-list":"active-locales-list";let v=(0,n.sprintf)(/* translators: %s: English (United States) */
(0,n.__)("Falling back to %s.","preferred-languages"),"English (United States)");return r&&(v=(0,n.__)("Falling back to Site Default.","preferred-languages")),(0,a.createElement)("div",{className:"active-locales wp-clearfix"},p&&(0,a.createElement)("div",{className:"active-locales-empty-message"},(0,n.__)("Nothing set.","preferred-languages"),(0,a.createElement)("br",null),v),(0,a.createElement)("ul",{role:"listbox","aria-labelledby":"preferred-languages-label",tabIndex:0,"aria-activedescendant":f,className:m,ref:d},t.map((e=>{const{locale:t,nativeName:l,lang:r}=e;return(0,a.createElement)("li",{key:t,role:"option","aria-selected":t===o?.locale,id:t,lang:r,className:"active-locale",onClick:()=>u(e)},l)}))),(0,a.createElement)(i,{languages:t,selectedLanguage:o,onMoveUp:()=>{l((e=>{const a=e.findIndex((e=>{let{locale:a}=e;return a===o.locale}));return g(Array.from(e),a,a-1)})),(0,c.speak)((0,n.__)("Locale moved up","preferred-languages"))},onMoveDown:()=>{l((e=>{const a=e.findIndex((e=>{let{locale:a}=e;return a===o.locale}));return g(Array.from(e),a,a+1)})),(0,c.speak)((0,n.__)("Locale moved down","preferred-languages"))},onRemove:()=>{const e=t.findIndex((e=>{let{locale:a}=e;return a===o.locale}));if(u(t[e+1]||t[e-1]),l((e=>e.filter((e=>{let{locale:a}=e;return a!==o.locale})))),(0,c.speak)((0,n.__)("Locale removed from list","preferred-languages")),1===t.length){let e=(0,n.sprintf)(/* translators: %s: English (United States) */
(0,n.__)("No languages selected. Falling back to %s.","preferred-languages"),"English (United States)");r&&(e=(0,n.__)("No languages selected. Falling back to Site Default.","preferred-languages")),(0,c.speak)(e)}}}))},d=window.wp.keycodes;function p(e){let{installedLanguages:t,availableLanguages:l,value:r,onChange:s}=e;const c=t.length||l.length;return(0,a.createElement)(o.SelectControl,{"aria-label":(0,n.__)("Inactive Locales","preferred-languages"),label:(0,n.__)("Inactive Locales","preferred-languages"),hideLabelFromVision:!0,value:r,onChange:s,disabled:!c,__next36pxDefaultSize:!0},t.length>0&&(0,a.createElement)("optgroup",{label:(0,n._x)("Installed","translations","preferred-languages")},t.map((e=>{let{locale:t,lang:l,nativeName:r}=e;return(0,a.createElement)("option",{key:t,value:t,lang:l},r)}))),l.length>0&&(0,a.createElement)("optgroup",{label:(0,n._x)("Available","translations","preferred-languages")},l.map((e=>{let{locale:t,lang:l,nativeName:r}=e;return(0,a.createElement)("option",{key:t,value:t,lang:l},r)}))))}function f(e){let{disabled:t,onClick:l}=e;return(0,s.useShortcut)("preferred-languages/add",(e=>{e.preventDefault(),t||l()})),(0,a.createElement)("div",{className:"inactive-locales-controls"},(0,a.createElement)(o.Button,{isSecondary:!0,showTooltip:!0,"aria-keyshortcuts":"Alt+A","aria-label":(0,n.sprintf)(/* translators: accessibility text. %s: keyboard shortcut. */
(0,n._x)("Add to list (%s)","language","preferred-languages"),d.shortcutAriaLabel.alt("A")),label:d.displayShortcut.alt("A"),disabled:t,onClick:l},(0,n._x)("Add","language","preferred-languages")))}const m=function(e){let{languages:t,onAddLanguage:l}=e;const[r,o]=(0,a.useState)(t[0]);(0,a.useEffect)((()=>{r||o(t[0])}),[r,t]);const s=t.filter((e=>{let{installed:a}=e;return Boolean(a)})),g=t.filter((e=>{let{installed:a}=e;return!a}));return(0,a.createElement)("div",{className:"inactive-locales wp-clearfix"},(0,a.createElement)("div",{className:"inactive-locales-list"},(0,a.createElement)(p,{installedLanguages:s,availableLanguages:g,value:r?.locale,onChange:e=>{o(t.find((a=>e===a.locale)))}})),(0,a.createElement)(f,{onClick:()=>{l(r);const e=s.findIndex((e=>{let{locale:a}=e;return a===r.locale})),a=g.findIndex((e=>{let{locale:a}=e;return a===r.locale}));let t;t=s[e+1],t||s[0]===r||(t=s[0]),t||(t=g[a+1],g[0]!==r&&(t=g[0])),o(t),(0,c.speak)((0,n.__)("Locale added to list","preferred-languages"))},disabled:!r}))};function v(){return(0,a.createElement)(o.Notice,{status:"warning",isDismissible:!1},(0,n.__)("Some of the languages are not installed. Re-save changes to download translations.","preferred-languages"))}function _(e){let{preferredLanguages:t}=e;const l=t.filter((e=>Boolean(e))).map((e=>{let{locale:a}=e;return a})).join(",");return(0,a.createElement)("input",{type:"hidden",name:"preferred_languages",value:l})}const w=function(e){const{allLanguages:t,hasMissingTranslations:l=!1,showOptionSiteDefault:o=!1}=e,{registerShortcut:c}=(0,r.useDispatch)(s.store);(0,a.useEffect)((()=>{c({name:"preferred-languages/move-up",category:"global",description:(0,n.__)("Move language up","preferred-languages"),keyCombination:{character:"ArrowUp"}}),c({name:"preferred-languages/move-down",category:"global",description:(0,n.__)("Move language down","preferred-languages"),keyCombination:{character:"ArrowDown"}}),c({name:"preferred-languages/select-first",category:"global",description:(0,n.__)("Select first language","preferred-languages"),keyCombination:{character:"Home"}}),c({name:"preferred-languages/select-last",category:"global",description:(0,n.__)("Select last language","preferred-languages"),keyCombination:{character:"End"}}),c({name:"preferred-languages/remove",category:"global",description:(0,n.__)("Remove from list","preferred-languages"),keyCombination:{character:"Backspace"}}),c({name:"preferred-languages/add",category:"global",description:(0,n._x)("Add to list","language","preferred-languages"),keyCombination:{modifier:"alt",character:"a"}})}));const[g,i]=(0,a.useState)(e.preferredLanguages),[d,p]=(0,a.useState)(e.preferredLanguages[0]),f=t.filter((e=>!g.find((a=>{let{locale:t}=a;return t===e.locale})))),w=g.some((e=>{let{installed:a}=e;return!a}));return(0,a.useEffect)((()=>{if(!w)return;const e=()=>{const e=document.createElement("span");e.className="spinner language-install-spinner is-active preferred-languages-spinner";const a=document.querySelector("#submit");a&&a.after(e)},a=document.querySelector("form");return a?(a.addEventListener("submit",e),()=>{a.removeEventListener("submit",e)}):void 0}),[w]),(0,a.createElement)(s.ShortcutProvider,null,(0,a.createElement)("div",{className:"preferred-languages"},(0,a.createElement)(_,{preferredLanguages:g}),(0,a.createElement)("p",null,(0,n.__)("Choose languages for displaying WordPress in, in order of preference.","preferred-languages")),(0,a.createElement)(u,{languages:g,setLanguages:i,showOptionSiteDefault:o,selectedLanguage:d,setSelectedLanguage:p}),(0,a.createElement)(m,{languages:f,onAddLanguage:e=>{i((a=>[...a,e])),p(e)}}),l&&(0,a.createElement)(v,null)))};l()((()=>{const e=window.PreferredLanguages,t=document.querySelector("#preferred-languages-root");document.querySelector(".user-language-wrap")?.replaceWith(t.parentElement.parentElement),document.querySelector(".options-general-php #WPLANG")?.parentElement?.parentElement?.replaceWith(t.parentElement.parentElement),document.querySelector(".network-admin.settings-php #WPLANG")?.parentElement?.parentElement?.replaceWith(t.parentElement.parentElement),(0,a.render)((0,a.createElement)(w,e),t)}))})();